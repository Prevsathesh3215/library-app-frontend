<!DOCTYPE html>
  <html>
    <head>

      <link rel="stylesheet" href="library-style.css"

    </head>
    <body>

      <a href="http://127.0.0.1:5500/library-login.html" style="padding: 10px;">Login</a>

      <div class="myDiv">
        <h1>Library App Register</h1>
        <form id='Library-Form'>

          <label for="input-username">Username:</label><br>
          <input type="text" id="input-username" name="username"><br>
          
          <label for="input-email">Email:</label><br>
          <input type="text" id="input-email" name="email"><br>

          <label for="input-password">Password:</label><br>
          <input type="text" id="input-password" name="password"><br>

          <label for="input-age">Age:</label><br>
          <input type="text" id="input-age" name="age"><br>

          <label for="input-role">Role:</label><br>
          <input type="text" id="input-role" name="role"><br>

          <label for="input-firstname">First Name:</label><br>
          <input type="text" id="input-firstname" name="firstname"><br>

          <label for="input-lastname">Last Name:</label><br>
          <input type="text" id="input-userlastname" name="lastname"><br>

          <input type="submit" value="Submit" class="submit-button "><br>

        </form>
      </div>
      <script>

        const handleSubmit = (event) => {
          event.preventDefault();

          console.log('ok');

          const data = new FormData(event.target);
          const obj = Object.fromEntries(data.entries());

          const jsonObject = JSON.stringify(obj);
          console.log(jsonObject)
          // console.log(obj)
          // console.log(obj['my-age']);

          fetch('http://127.0.0.1:5900/api/users/register', {
              mode: 'cors',
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: jsonObject
            })
            .then((resp) => resp)
            .catch((err) => console.error(err));

        }

        const form = document.querySelector('#Library-Form');
        form.addEventListener('submit', handleSubmit);


      </script>


    </body>


  </html>